# StoLink - 페이지 구성 및 기능 명세서

> AI 기반 작가용 스토리 관리 플랫폼

**버전:** 1.5
**작성일:** 2024년 12월 25일
**상태:** 활성

> 📐 프로젝트 구조 → [ARCHITECTURE.md](./ARCHITECTURE.md)
> 🔧 기술 스택 → [TECHSTACK.md](./TECHSTACK.md)
> 🗂️ 데이터 모델 → [DATA_MODEL.md](./DATA_MODEL.md)
> 📡 API 명세 → [API_SPEC.md](./API_SPEC.md)

---

## 1. 개요

StoLink는 작가를 위한 AI 기반 스토리 관리 플랫폼입니다. 복선 관리, 캐릭터 관계도, 세계관 설정 등을 체계적으로 관리하여 작가가 창작에만 집중할 수 있도록 지원합니다.

### 1.1 페이지 구성 요약

| #   | 페이지명    | 경로                     | 핵심 기능                   |
| --- | ----------- | ------------------------ | --------------------------- |
| 1   | 랜딩 페이지 | `/`                      | 서비스 소개, 회원가입 유도  |
| 2   | 인증        | `/auth`                  | 로그인, 회원가입            |
| 3   | 서재        | `/library`               | 작품 목록, 새 작품 생성     |
| 4   | 에디터      | `/projects/:id/editor`   | 글쓰기, 복선 관리, AI 챗봇  |
| 5   | 세계관      | `/projects/:id/world`    | 캐릭터 관계도, 장소, 아이템 |
| 6   | 작품 설정   | `/projects/:id/settings` | 내보내기, 공유, 통계        |

---

## 2. 랜딩 페이지

**경로:** `/`
**목적:** 서비스 소개 및 신규 사용자 유입

### 구성 요소

- **네비게이션 바**
  - 로고 (StoLink)
  - 기능 링크
  - 로그인/시작하기 버튼

- **Hero 섹션**
  - 메인 카피: "당신의 이야기, 하나도 놓치지 않게"
  - 서브 카피: "복선, 캐릭터, 세계관을 한눈에 관리하세요"
  - CTA 버튼: 무료로 시작하기, 둘러보기
  - 에디터 프리뷰 이미지/목업

- **Features 섹션**
  - 스마트 에디터: 마크다운 기반, 자동저장
  - 복선 관리: 태그 기반 복선 추적
  - 캐릭터 관계도: 그래프 시각화
  - AI 일관성 체크: 모순 감지
  - 장면 시각화: AI 이미지 생성
  - 내보내기 & 공유: PDF, 마크다운

- **About 섹션**
  - 서비스 상세 소개
  - 캐릭터 관계도 프리뷰 이미지

- **CTA 섹션**
  - 최종 전환 유도
  - "무료로 시작하기" 버튼

- **Footer**
  - 이용약관
  - 개인정보처리방침
  - 문의하기

---

## 3. 인증 페이지

**경로:** `/auth`
**목적:** 사용자 인증 (로그인/회원가입 통합)

### 3.1 로그인 탭

| 요소          | 설명                   |
| ------------- | ---------------------- |
| 이메일 입력   | 필수, 이메일 형식 검증 |
| 비밀번호 입력 | 필수, 마스킹 처리      |
| 로그인 버튼   | 폼 제출                |
| 비밀번호 찾기 | 링크, 이메일 인증 방식 |
| 소셜 로그인   | Google, Kakao (선택적) |

### 3.2 회원가입 탭

| 요소          | 설명                             |
| ------------- | -------------------------------- |
| 이메일 입력   | 필수, 중복 확인 API 호출         |
| 비밀번호 입력 | 필수, 강도 표시 (약함/보통/강함) |
| 비밀번호 확인 | 일치 여부 실시간 검증            |
| 닉네임/필명   | 필수, 2-20자                     |
| 이용약관 동의 | 체크박스, 필수                   |
| 회원가입 버튼 | 폼 제출                          |

### 3.3 API 엔드포인트

> 📡 상세 API 명세 → [API_SPEC.md](./API_SPEC.md#1-인증-auth)

---

## 4. 서재 페이지

**경로:** `/library`
**목적:** 사용자의 모든 작품을 한눈에 관리
**접근:** 로그인 필수 (미로그인 시 /auth로 리다이렉트)

### 4.1 구성 요소

- **상단 헤더**
  - 로고
  - 사용자 프로필 (드롭다운: 설정, 로그아웃)

- **새 작품 생성**
  - `+` 카드 형태
  - 클릭 시 작품 생성 모달

- **작품 목록**
  - 그리드 뷰 (책 표지 형태)
  - 반응형: 4열 → 3열 → 2열 → 1열

- **검색 및 필터**
  - 검색: 제목 기준
  - 필터: 장르, 상태 (집필중/완결)
  - 필터: 장르, 상태 (집필중/완결)
  - 정렬: 최근 수정순, 생성순, 이름순
  - **책 읽기 모드:**
    - 작품 클릭 시 '읽기 모드' 진입 가능
    - 2단 컬럼 레이아웃 (종이책 스타일)
    - 컨트롤 패널 자동 숨김 (몰입형 독서)
    - 폰트 크기, 줄 간격, 테마(Light/Dark/Sepia) 조절

### 4.2 작품 카드

```
┌─────────────────┐
│                 │
│   [표지 이미지]  │
│                 │
├─────────────────┤
│ 작품 제목       │
│ 장르 태그       │
│ 최종 수정: 3일전 │
│ ● 집필중        │
└─────────────────┘
```

**표시 정보:**

- 작품 제목
- 표지 이미지 (기본 또는 AI 생성)
- 장르 태그
- 최종 수정일
- 진행 상태 (집필중/완결)

**액션:**

- 클릭: 에디터 페이지로 이동
- 우클릭/더보기 메뉴:
  - 이름 변경
  - 복제
  - 삭제 (확인 모달)

### 4.3 작품 생성 모달

| 필드      | 설명                                      |
| --------- | ----------------------------------------- |
| 작품 제목 | 필수, 1-100자                             |
| 장르 선택 | 드롭다운 (판타지, 로맨스, SF, 추리, 기타) |
| 설명      | 선택, 시놉시스                            |

### 4.4 API 엔드포인트

> 📡 상세 API 명세 → [API_SPEC.md](./API_SPEC.md#2-프로젝트-projects)

---

## 5. 에디터 페이지 ⭐

**경로:** `/projects/:id/editor`
**목적:** 글쓰기 및 실시간 스토리 관리 (핵심 페이지)

### 5.1 레이아웃 구조

```
┌─────────────────────────────────────────────────────────────────┐
│ 헤더: [← 서재] 작품명 | 저장상태 | [파일] [설정]                │
├─────────────┬───────────────────────────────┬───────────────────┤
│             │                               │                   │
│   좌측      │         중앙                  │       우측        │
│   사이드바   │         에디터                │       사이드바     │
│             │                               │                   │
│   챕터 트리  │   마크다운 편집 영역           │   [복선] [AI] [체크]│
│             │                               │                   │
│   - 1부     │   "이 검을 가져가거라."        │   복선 목록        │
│     - 1장   │   #복선:전설의검               │   - #전설의검 미회수│
│     - 2장   │   주인공은 아직 모른다...      │   - #숨겨진과거 회수│
│   - 2부     │                               │                   │
│             │                               │                   │
├─────────────┴───────────────────────────────┴───────────────────┤
│ 하단: 글자수: 1,234 | 맞춤법 검사 ON | [AI 분석 요청]            │
└─────────────────────────────────────────────────────────────────┘
```

### 5.2 상단 헤더

| 요소      | 설명                                        |
| --------- | ------------------------------------------- |
| 서재 버튼 | ← 아이콘, /library로 이동                   |
| 작품명    | 클릭 시 수정 가능                           |
| 저장 상태 | "저장됨 ✓" / "저장 중..." / "저장 안 됨 ⚠️" |
| 페이지 탭 | 에디터 / 세계관 / 설정 / 통계               |

### 5.3 좌측 사이드바 - 챕터 트리

**구조:**

```
📁 1부: 여정의 시작
   📄 1장: 만남 (2,340자)
   📄 2장: 출발 (1,890자) ← 현재 편집중
   📄 [플롯] 3장: 시련
📁 2부: 성장
   📄 1장: 수련
```

**기능:**

- 부(Part) > 장(Chapter) > 절(Section) 계층 구조
- 드래그 앤 드롭으로 순서 변경
- 우클릭 컨텍스트 메뉴:
  - 새 챕터 추가
  - 새 하위 섹션 추가
  - 이름 변경
  - 삭제
- 챕터별 글자수 표시
- [플롯] 표시: 내용 없이 제목만 있는 챕터
- 접기/펼치기

### 5.4 중앙 - 에디터 영역

**에디터 기능:**

- 마크다운 기반 텍스트 에디터
- 실시간 프리뷰 (선택적 토글)
- WYSIWYG 툴바 (Bold, Italic, 제목 등)

**자동저장:**

- 디바운스: 1.5초 (타이핑 멈춘 후)
- 저장 방식: 델타 저장 (변경분만)
- 저장 위치: PostgreSQL (델타 로그) + S3 (주기적 스냅샷)

**복선 태그:**

- 문법: `#복선:태그명`
- 자동완성: 기존 태그 목록에서 추천
- 하이라이트: 배경색으로 구분 (Sage Green 계열)
- 클릭: 우측 사이드바에서 상세 정보

**맞춤법 검사:**

- 빨간 밑줄로 표시
- 우클릭 시 수정 제안

**하단 상태바:**

- 글자수 / 단어수
- 맞춤법 검사 ON/OFF
- AI 분석 요청 버튼

### 5.5 우측 사이드바 - 탭 구성

#### 탭 1: 복선 관리

```
[현재 챕터] [전체]

#전설의검
├ 상태: 미회수
├ 등장: 1장 (32번째 줄)
├ 설명: 노인이 건넨 검
└ [회수 처리] [이동]

#숨겨진과거
├ 상태: 회수됨 ✓
├ 등장: 1장 → 회수: 5장
└ [이동]
```

**기능:**

- 현재 챕터 / 전체 작품 필터
- 복선별 정보: 상태, 등장 위치, 설명
- 복선 클릭 시 해당 위치로 스크롤
- 수동 회수 처리 버튼
- 복선 검색

#### 탭 2: AI 챗봇

```
┌─────────────────────────┐
│ AI: 무엇을 도와드릴까요?  │
│                         │
│ 나: 주인공이 검을 받는   │
│     장면 다음에 뭘 써야  │
│     할지 모르겠어        │
│                         │
│ AI: 몇 가지 방향을       │
│     제안드릴게요...      │
│                         │
├─────────────────────────┤
│ [입력창]          [전송] │
└─────────────────────────┘
```

**기능:**

- 스토리 관련 질문 응답
- 아이디어 제안
- 캐릭터/설정 기반 조언
- 현재 챕터 컨텍스트 인식

#### 탭 3: 일관성 체크

```
마지막 검사: 5분 전 [다시 검사]

⚠️ 경고 2건

1. 캐릭터 모순 (3장 42줄)
   "아린은 물을 무서워한다"고 설정했으나
   "아린이 강에 뛰어들었다"
   [이동] [무시]

2. 아이템 누락 (5장 12줄)
   "마법 지팡이"를 사용했으나
   획득 기록이 없음
   [이동] [무시]

✓ 통과 항목 보기
```

**기능:**

- 트리거: Ctrl+S, 분석 버튼, 5분 idle 시 자동
- 검사 항목:
  - 캐릭터 설정 vs 행동 모순
  - 아이템/설정 누락
  - 세계관 설정 위반
  - 시간선 오류
- 문제점 클릭 시 해당 위치로 이동
- 무시 처리 (의도된 설정)

### 5.6 단축키

| 단축키     | 기능               |
| ---------- | ------------------ |
| `Ctrl + S` | 저장 + 일관성 체크 |
| `Ctrl + B` | 굵게               |
| `Ctrl + I` | 기울임             |
| `Ctrl + K` | 링크 삽입          |
| `Ctrl + /` | 복선 태그 자동완성 |
| `Ctrl + F` | 찾기               |
| `Ctrl + H` | 찾기 및 바꾸기     |

### 5.7 API 엔드포인트

> 📡 상세 API 명세 → [API_SPEC.md](./API_SPEC.md#3-문서-documents) (문서), [#6 복선](./API_SPEC.md#6-복선-foreshadowing), [#11 AI](./API_SPEC.md#11-ai-기능-ai)

---

## 6. 세계관 페이지

**경로:** `/projects/:id/world`
**목적:** 캐릭터, 장소, 아이템 등 세계관 요소 관리

### 6.1 탭 구성

```
[캐릭터 관계도] [캐릭터 목록] [장소] [아이템]
```

### 6.2 탭 1: 캐릭터 관계도

**시각화:**

```
        (주인공)
       /    |    \
    친밀   적대   중립
     /      |      \
(조력자) (악당) (멘토)
     \      |      /
      \     |     /
       (히로인)
```

**기능:**

- **그래프 시각화 (React Flow):**
  - **Force-Directed 레이아웃:** 노드 간 반발력 적용, 황금 각도 스파이럴 배치
  - **옵시디언 스타일 디자인:** 얇고 투명한 간선, 직관적인 시각화
  - 확대/축소 (마우스 휠, 컨트롤 패널), 패닝 (드래그)
  - 미니맵 및 컨트롤 패널 제공
- **노드 디자인:**
  - 원형 아바타 스타일
  - 주인공/주요 인물 강조 (크기, 테두리, 그림자)
  - 마우스 오버 시 컬러 전환 (Grayscale -> Color)
- **관계 표현:**
  - 친밀: 초록 (#22c55e)
  - 적대: 빨강 (#ef4444)
  - 로맨스: 핑크 (#ec4899)
  - 가족: 검정 (#1f2937)
  - 중립: 회색 (#9ca3af), 점선 처리
- **필터링 시스템:**
  - **노드 포커스:** 캐릭터 클릭 시 연결된 관계만 하이라이트, 나머지는 블러/Dim 처리
  - **관계 유형 필터:** 좌측 상단 드롭다운 메뉴로 특정 관계(우호/적대 등)만 필터링
- **인터랙션:**
  - 배경 클릭 시 필터 해제
  - 노드 클릭 시 우측 상세 패널 연동

### 6.3 탭 2: 캐릭터 목록

**뷰 옵션:** 카드 뷰 / 리스트 뷰

**캐릭터 카드:**

```
┌─────────────────────┐
│ [AI 생성 이미지]     │
├─────────────────────┤
│ 아린               │
│ 종족: 엘프          │
│ 역할: 주인공        │
│ 등장: 1, 3, 5장     │
│ 복선: 2개 연결      │
└─────────────────────┘
```

**캐릭터 상세 정보:**

- 기본 정보: 이름, 종족, 나이, 성별
- 외형: AI 생성 이미지, 텍스트 설명
- 성격: 키워드 태그
- 배경: 스토리 배경
- 관계: 다른 캐릭터와의 관계 목록
- 등장 챕터: 링크 목록
- 관련 복선: 링크 목록

**기능:**

- 검색 (이름 기준)
- 정렬 (이름순, 등장순)
- 수동 편집: AI 추출 정보 수정
- 이미지 재생성 요청

### 6.4 탭 3: 장소

**장소 목록:**

```
📍 지역
   - 왕국 아르카나
   - 금지된 숲

📍 건물
   - 마법사 탑
   - 왕궁

📍 특수 장소
   - 차원의 틈
```

**장소 정보:**

- 이름
- 유형 (지역/건물/특수)
- 설명
- 연관 캐릭터
- 등장 챕터

### 6.5 탭 4: 아이템

**아이템 목록:**

```
⚔️ 무기
   - 전설의 검
   - 마법 지팡이

📿 악세서리
   - 투명 망토

📜 문서
   - 예언서
```

**아이템 정보:**

- 이름
- 유형
- 설명 및 능력
- 현재 소유자
- 소유자 변경 이력
- 관련 복선

### 6.6 API 엔드포인트

> 📡 상세 API 명세 → [API_SPEC.md](./API_SPEC.md#4-캐릭터-characters) (캐릭터), [#7 장소](./API_SPEC.md#7-장소-places), [#8 아이템](./API_SPEC.md#8-아이템-items)

---

## 7. 작품 설정 페이지

**경로:** `/projects/:id/settings`
**목적:** 작품 정보, 통계, 내보내기, 공유 관리

### 7.1 작품 정보

| 필드          | 설명                |
| ------------- | ------------------- |
| 작품 제목     | 수정 가능           |
| 장르          | 드롭다운 선택       |
| 설명/시놉시스 | 텍스트 영역         |
| 표지 이미지   | 업로드 또는 AI 생성 |
| 연재 상태     | 집필중 / 완결       |

### 7.2 통계

```
┌─────────────────────────────────────┐
│ 📊 작품 통계                        │
├─────────────────────────────────────┤
│ 총 글자수      │ 152,340자          │
│ 총 단어수      │ 48,291단어         │
│ 챕터 수        │ 24개               │
│ 캐릭터 수      │ 18명               │
│ 복선 회수율    │ 67% (8/12)         │
│ 일관성 점수    │ 94점               │
│ 작성 기간      │ 45일               │
│ 예상 분량      │ 약 380페이지 (문고판)│
└─────────────────────────────────────┘
```

### 7.3 내보내기

**지원 형식:**

- PDF
  - 포맷: A4, 문고판 (신국판), 사용자 정의
  - 여백, 폰트 크기 설정
- 마크다운 (.md)
- EPUB (향후 지원)
- DOCX (향후 지원)

**옵션:**

- 전체 내보내기
- 챕터 선택 내보내기
- 복선 주석 포함/제외

### 7.4 공유

**읽기 전용 공유:**

- 공유 링크 생성
- 만료 기간: 1일 / 7일 / 30일 / 무제한
- 비밀번호 보호 (선택)
- 공유 링크 비활성화

**협업 (향후):**

- 편집자 초대
- 코멘트 기능
- 변경 이력

### 7.5 위험 구역

- 작품 삭제 (확인 모달, 작품명 입력 필요)

### 7.6 API 엔드포인트

> 📡 상세 API 명세 → [API_SPEC.md](./API_SPEC.md#2-프로젝트-projects), [#9 내보내기](./API_SPEC.md#9-내보내기가져오기-exportimport), [#10 공유](./API_SPEC.md#10-공유-sharing)

---

## 8. 기술 스택

| 구분       | 기술                                          |
| ---------- | --------------------------------------------- |
| Frontend   | React, Tailwind CSS, shadcn/ui, Radix UI      |
| Backend    | Spring Boot                                   |
| AI Service | FastAPI, LangGraph, LLM                       |
| Database   | PostgreSQL (RDS), Neo4j (Graph)               |
| Storage    | AWS S3                                        |
| Hosting    | S3 + CloudFront (Frontend), EC2/ECS (Backend) |
| Libraries  | React Flow (Graph), Tiptap (Editor)           |

### 8.1 아키텍처

```
User → React (S3+CloudFront) → Spring API → PostgreSQL
                                    ↓            ↓
                               FastAPI ←→ Neo4j
                                    ↓
                              LangGraph → LLM
                                    ↓
                                   S3 (이미지)
```

### 8.2 데이터 흐름

**자동저장:**

```
에디터 변경 → 디바운스 1.5초 → 델타 계산 → Spring API → PostgreSQL (델타 로그)
                                                    → S3 (10분마다 스냅샷)
```

**AI 분석:**

```
분석 트리거 → Spring → FastAPI → LangGraph → LLM
                                     ↓
                              결과 → Neo4j (캐릭터/관계)
                                  → PostgreSQL (복선/일관성)
```

---

## 9. 디자인 시스템

### 9.1 컬러 팔레트

| 이름       | HEX       | 용도                       |
| ---------- | --------- | -------------------------- |
| Sage Green | `#6B8E6B` | Primary - 버튼, 강조, 링크 |
| Sage Light | `#8BA888` | Hover 상태                 |
| Sage Dark  | `#4A6B4A` | 텍스트 강조, 그라디언트    |
| Sage 50    | `#F4F7F4` | 배경 (연한)                |
| Sage 100   | `#E8EFE8` | 카드 배경, 뱃지            |
| Stone 50   | `#FAFAF9` | 페이지 배경                |
| Stone 500  | `#78716C` | 보조 텍스트                |
| Stone 800  | `#292524` | 본문 텍스트                |

### 9.2 관계도 색상

| 관계 유형 | 색상 | HEX       |
| --------- | ---- | --------- |
| 친밀      | 초록 | `#22c55e` |
| 적대      | 빨강 | `#ef4444` |
| 로맨스    | 핑크 | `#ec4899` |
| 가족      | 검정 | `#1f2937` |
| 중립      | 회색 | `#9ca3af` |

### 9.3 상태 색상

| 상태        | 색상 | HEX       |
| ----------- | ---- | --------- |
| 성공/회수됨 | 초록 | `#22c55e` |
| 경고/미회수 | 노랑 | `#eab308` |
| 오류/위험   | 빨강 | `#ef4444` |

### 9.4 폰트

- **본문:** Pretendard
- **대체:** -apple-system, BlinkMacSystemFont, sans-serif
- **크기:**
  - 본문: 16px
  - 작은 텍스트: 14px
  - 제목 (H1): 32px
  - 제목 (H2): 24px
  - 제목 (H3): 20px

### 9.5 간격

- 기본 단위: 4px
- 컴포넌트 내부 패딩: 16px (4 units)
- 컴포넌트 간 간격: 24px (6 units)
- 섹션 간 간격: 48px (12 units)

---

## 10. 버전 이력

| 버전 | 날짜    | 변경 내용                                                                     |
| ---- | ------- | ----------------------------------------------------------------------------- |
| 1.0  | 2024.12 | 최초 작성                                                                     |
| 1.1  | 2024.12 | 세계관 그래프 리디자인, 독서 모드 추가                                        |
| 1.2  | 2024.12 | 랜딩 페이지 CTA→Stats 섹션 변경, Footer 공통화, 버튼 rounded-full 스타일 적용 |
| 1.3  | 2024.12 | 에디터 사이드바 분리, 컨텍스트 메뉴, 텍스트 가져오기, 내보내기 서비스 추가    |
| 1.4  | 2024.12 | 문서 간 상호 참조 추가 (ARCHITECTURE, TECHSTACK, DATA_MODEL)                  |

---

## 부록 A: 복선 태그 문법

```markdown
일반 텍스트 중간에 #복선:태그명 형태로 작성

예시:
"이 검을 가져가거라." 노인이 말했다. #복선:전설의검
주인공은 아직 이 검의 진정한 힘을 알지 못했다.
```

**태그 규칙:**

- 형식: `#복선:태그명`
- 태그명: 한글, 영문, 숫자, 언더스코어 허용
- 길이: 2-30자
- 대소문자 구분 없음

---

## 부록 B: 단축키 전체 목록

| 단축키       | 위치   | 기능               |
| ------------ | ------ | ------------------ |
| `Ctrl + S`   | 에디터 | 저장 + 일관성 체크 |
| `Ctrl + B`   | 에디터 | 굵게               |
| `Ctrl + I`   | 에디터 | 기울임             |
| `Ctrl + K`   | 에디터 | 링크 삽입          |
| `Ctrl + /`   | 에디터 | 복선 태그 자동완성 |
| `Ctrl + F`   | 에디터 | 찾기               |
| `Ctrl + H`   | 에디터 | 찾기 및 바꾸기     |
| `Ctrl + Z`   | 에디터 | 실행 취소          |
| `Ctrl + Y`   | 에디터 | 다시 실행          |
| `Ctrl + 1~6` | 에디터 | 제목 수준          |
| `Esc`        | 전역   | 모달 닫기          |
